#! /usr/bin/env node
const shell = require("shelljs");
const argv = require("yargs").argv;
const path = require("path");
const root = process.cwd();
const libRoot = path.resolve(__dirname, "..");
const workRoot = path.resolve(root);

console.log(libRoot, workRoot);

shell.mkdir("-p", path.resolve(libRoot, "runtime"));

const app = require(path.resolve(libRoot, "build", "run.js"))
app.run(argv.port || 9000)
//这里以后可以ifconfig/grep一下, 要看下shell的兼容性
app.open(`http:localhost:${argv.port || 9000}`)
//watch还没弄

const watch = require(path.resolve(libRoot, "watch.js"));

watch.watch(path.resolve(workRoot, "test.md"), path.resolve(libRoot, "runtime", "built.js"))